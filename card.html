<head>
    <title>mObywatel</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="assets/card.css?v=1.2">
    <link rel="stylesheet" href="assets/main.css">
    <link rel="icon" type="image/x-icon" href="images/otM5jOA.png">
    <link rel="apple-touch-icon" href="images/otM5jOA.png">
    <link rel="shortcut icon" href="images/otM5jOA.png">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=0.8, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <style>
        .circle-buttons {
      display: flex;
      justify-content: space-around;
      margin-top: 24px;
    }
    .circle-button {
      background-color: #2c2c2c;
      border-radius: 50%;
      width: 72px;
      height: 72px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      text-align: center;
      border: 1px solid #444;
    }
    .circle-button span {
      margin-top: 6px;
    }

.box_value, .box_value1{
    font-size: 1rem;
    font-weight: 500;
    color: #1f2125;
    margin: 0;
    padding: 0;

}

.services_grid {
    display: flex;
    justify-content: flex-start; /* lub space-between */
    flex-wrap: nowrap;
    gap: 5px;
    width: 100%;
    margin: 0 auto;
    padding: 5px;
    overflow-x: auto; /* POZWALA przewijać poziomo na małych ekranach */
    max-width: auto;
    float: left;
    padding-bottom: 0px;
}


.service_box {
    flex: 1 1 20%;
    min-width: 0px;
    max-width: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 15px;
    border-radius: 10px;
    text-align: center;
    transition: transform 0.3s ease;
    padding-bottom: 0px;
}

.service_box_icon {
    width: 30px;
    height: 30px;
    object-fit: contain;
    margin-bottom: 10px;
    border-radius: 20px;
    padding: 10px;
    background-color: white;
    margin: 0px;
}


.service_box_name {
    font-size: 12px;
    font-weight: 600;
    color: #1f2125;
    line-height: 1.2;
    min-height: 3em; /* zapewnia równe wysokości tekstu */
    padding-bottom: 0px;
}

.confirm_box{
    margin-bottom: 20px;
    margin-top: 20px;
}

.other_grid{
    padding-top: auto;
}

/* Dodano style dla holograficznego orła */
.holographic-eagle-container {
    position: relative;
    width: 100%;
    height: 100%;
}

.holographic-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transition: transform 0.1s ease-out, opacity 0.3s ease;
    pointer-events: none;
}

.holographic-layer img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

    </style>
</head>
<body>
    <div class="top_grid">
        <div class="action_grid">
            <img src="images/BDZT6fX.png" class="back_img">
            <p onclick="sendTo('home')" class="back_text">Wróć</p>
        </div>
        <p class="title_text">mDowód</p>
        <img src="images/pomoctechniczna2.png" class="help_img" style="width: 20px;">
    </div>

    <div class="bottom_bar">
        <div class="bottom_bar_grid">
            <div class="bottom_element_grid" send="home">
                <div class="bottom_element_image home_open"></div>
                <p class="bottom_element_text">Pulpit</p>
            </div>
            <div class="bottom_element_grid" send="documents">
                <div class="bottom_element_image documents"></div>
                <p class="bottom_element_text open">Dokumenty</p>
            </div>
            <div class="bottom_element_grid" send="services">
                <div class="bottom_element_image services"></div>
                <p class="bottom_element_text">Usługi</p>
            </div>
            <div class="bottom_element_grid" send="qr">
                <div class="bottom_element_image qr"></div>
                <p class="bottom_element_text">Kod QR</p>
            </div>
            <div class="bottom_element_grid" send="more">
                <div class="bottom_element_image more"></div>
                <p class="bottom_element_text">Więcej</p>
            </div>
        </div>
    </div>
    <p class="time_text" id="time"></p>
    <div class="id_image_data">
        <img draggable="false" class="id_image" src="images/XSZFxrl.png">
        <div class="inset">

        </div>
        <div class="id_own_image" style="background-image: url('https://i.imgur.com/7vHo48p.jpg');"></div>
        <img draggable="false" src="images/gzot1Pt.gif" class="flag_video">
        
        <!-- Zastąpiono GIF orła holograficznym orłem z 5 warstwami -->
        <div class="holographic-eagle-container eagle_video" id="holographicEagle">
            <div class="holographic-layer" id="background-layer">
                <img draggable="false" src="pictures/hologram_background.png" alt="Hologram Background">
            </div>
            <div class="holographic-layer" id="eagle-layer1">
                <img draggable="false" src="pictures/eagle_layer1.png" alt="Eagle Layer 1">
            </div>
            <div class="holographic-layer" id="eagle-layer2">
                <img draggable="false" src="pictures/eagle_layer2.png" alt="Eagle Layer 2">
            </div>
            <div class="holographic-layer" id="eagle-layer3">
                <img draggable="false" src="pictures/eagle_layer3.png" alt="Eagle Layer 3">
            </div>
            <div class="holographic-layer" id="overlay-layer">
                <img draggable="false" src="pictures/hologram_overlay.png" alt="Hologram Overlay">
            </div>
        </div>
        
        <p class="eagle_text">Rzeczpospolita<br>Polska</p>
        <div class="id_data_grid">
            <div class="data_holder">
                <p class="data_title firstname" id="name"></p>
                <p class="data_value">Imię (imiona)</p>
            </div>
            <div class="data_holder">
                <p class="data_title surname" id="surname"></p>
                <p class="data_value">Nazwisko</p>
            </div>
            <div class="data_holder">
                <p class="data_title" id="nationality"></p>
                <p class="data_value">Obywatelstwo</p>
            </div>
            <div class="data_holder">
                <p class="data_title" id="birthday"></p>
                <p class="data_value">Data urodzenia</p>
            </div>
            <div class="data_holder">
                <p class="data_title" id="pesel"></p>
                <p class="data_value">Numer PESEL</p>
            </div>
        </div>
    </div>
    <div class="id_bottom">
        <div class="bottom_grid">
            <img class="bottom_image" src="images/7S4kQGf.png">
            <p class="bottom_text" style="color: #317C26; font-size: 17px;">Dokument ważny</p>
        </div>
    </div>

    <div class="services_grid" style="height: auto; width: auto;">
        <div class="service_box">
            <img class="service_box_icon" id="1" src="images/Pfan6Qa.png" onclick="sendTo('qr2')">
            <p class="service_box_name">Potwierdź swoje dane</p>
        </div>
        <div class="service_box">
            <img class="service_box_icon" id="2" src="images/KUMNgQC.png" onclick="sendTo('dane')">
            <p class="service_box_name" style="width: 100px;">Dane dowodu <br>osobistego</p>
        </div>
        <div class="service_box">
            <img class="service_box_icon" id="3" src="images/pobrane.png" onclick="sendTo('zastzrzez')">
            <p class="service_box_name">Zastrzeż <br>PESEL</p>
        </div>
        <div class="service_box">
            <img class="service_box_icon" id="4" src="images/ECjKGrW2.png" onclick="sendTo('pozostałe')">
            <p class="service_box_name">Pozostałe skróty</p>
        </div>
    </div>
    
    <div class="other_grid" style="margin-top: 0px;">
        <!-- Pierwszy bottom_holder z tabelką z danymi dokumentu -->
        <div class="bottom_holder" style="height: auto">
            
                <!-- Seria i numer -->
                <div class="confirm_box" style="border: none;">
                    <p class="box_top">Seria i numer</p>
                    <b><p class="box_value" id="seria_numer" style="font-size: 25px;"></p></b>
                    <button class="main_button">Kopiuj</button>
                </div>
                <!-- Organ wydający -->
                <div class="confirm_box">
                    <p class="box_top">Termin ważności</p>
                    <b><p class="box_value" id="waznosc" style="font-size: 22px;"></p></b>
                </div>
                <!-- Termin ważności -->
                <div class="confirm_box">
                    <p class="box_top">Data wydania</p>
                    <b><p class="box_value" id="wydany" style="font-size: 22px;"></p></b>
                </div>
                <div class="confirm_box">
                    <p class="box_top">Imię ojca</p>
                    <b><p class="box_value" id="fatherName" style="font-size: 22px;"></p></b>
                </div>
                <div class="confirm_box">
                    <p class="box_top">Imię matki</p>
                    <b><p class="box_value" id="motherName" style="font-size: 22px;"></p></b>
                </div>
        </div>
        
    
        <!-- Drugi bottom_holder (rozwijany) -->
        <div class="bottom_holder info_holder" style="font-size: 20px;">
            <div class="bottom_grid">
                <p class="bottom_text" style="color: #1f2125; margin-left: 0px;">Twoje dodatkowe dane</p>
            </div>
            <img class="action_arrow" src="images/2aN0vJE.png">
            <div class="additional_holder">
                <div class="additional_grid">
                    <p class="additional_title">Nazwisko rodowe</p>
                    <p class="additional_subtitle" id="familyName"></p>
                </div>
                <div class="additional_grid">
                    <p class="additional_title">Płeć</p>
                    <p class="additional_subtitle" id="sex"></p>
                </div>
                <div class="additional_grid">
                    <p class="additional_title">Nazwisko rodowe ojca</p>
                    <p class="additional_subtitle" id="fathersFamilyName"></p>
                </div>
                <div class="additional_grid">
                    <p class="additional_title">Nazwisko rodowe matki</p>
                    <p class="additional_subtitle" id="mothersFamilyName"></p>
                </div>
                <div class="additional_grid">
                    <p class="additional_title">Miejsce urodzenia</p>
                    <p class="additional_subtitle" id="birthPlace"></p>
                </div>
                <div class="additional_grid">
                    <p class="additional_title">Kraj urodzenia</p>
                    <p class="additional_subtitle" id="countryOfBirth"></p>
                </div>
                <div class="additional_grid">
                    <p class="additional_title">Adres zameldowania na pobyt stały</p>
                    <p class="additional_subtitle" id="adress"></p>
                </div>
                <div class="additional_grid" style="border-bottom: none;">
                    <p class="additional_title">Data zameldowania na pobyt stały</p>
                    <p class="additional_subtitle home_date"></p>
                </div>
            </div>
        </div>
    
        <!-- Trzeci bottom_holder z przyciskiem "Aktualizuj" -->
        <div class="bottom_holder" style="height: 90px; margin-bottom: 120px;">
            <div class="bottom_update">
                <div class="bottom_update_grid">
                    <p class="bottom_update_text" style="margin-left: 0px;">Ostatnia aktualizacja</p>
                    <p class="bottom_update_value" style="margin-left: 0px;"></p>
                </div>
                <button class="main_button update">Aktualizuj</button>
            </div>
        </div>
    </div>
    
    <script src="assets/bar.js"></script>
    <script src="assets/card.js?v=1.0"></script>
    <script src="assets/manifest.js"></script>

    <script>
        let isGyroscopeEnabled = false;

        // Funkcja do żądania pozwolenia na iOS
        function requestGyroscopePermission() {
            if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(permissionState => {
                        if (permissionState === 'granted') {
                            isGyroscopeEnabled = true;
                            startGyroscope();
                        }
                    })
                    .catch(console.error);
            } else {
                // Android lub starsze przeglądarki
                isGyroscopeEnabled = true;
                startGyroscope();
            }
        }

        // Funkcja uruchamiająca żyroskop
        function startGyroscope() {
            window.addEventListener('deviceorientation', handleOrientation);
        }

        // Obsługa ruchu żyroskopu
        function handleOrientation(event) {
            if (!isGyroscopeEnabled) return;

            const gamma = event.gamma || 0; // obrót lewo-prawo (-90 do 90)
            const beta = event.beta || 0;   // obrót przód-tył (-180 do 180)

            // Normalizacja wartości do zakresu 0-1
            const normalizedGamma = Math.max(-1, Math.min(1, gamma / 45));
            const normalizedBeta = Math.max(-1, Math.min(1, beta / 45));

            // Pobierz warstwy hologramu
            const backgroundLayer = document.getElementById('background-layer');
            const eagleLayer1 = document.getElementById('eagle-layer1');
            const eagleLayer2 = document.getElementById('eagle-layer2');
            const eagleLayer3 = document.getElementById('eagle-layer3');
            const overlayLayer = document.getElementById('overlay-layer');

            // Oblicz przezroczystość i przesunięcie dla każdej warstwy
            const baseOpacity = 0.8;
            const movement = normalizedGamma * 10; // maksymalne przesunięcie 10px

            // Tło hologramu - lekkie przesunięcie
            if (backgroundLayer) {
                backgroundLayer.style.transform = `translate(${movement * 0.2}px, ${normalizedBeta * 2}px)`;
                backgroundLayer.style.opacity = baseOpacity * 0.6;
            }

            // Pierwsza warstwa orła - średnie przesunięcie
            if (eagleLayer1) {
                const opacity1 = Math.abs(normalizedGamma) < 0.6 ? baseOpacity : baseOpacity * (1 - Math.abs(normalizedGamma));
                eagleLayer1.style.transform = `translate(${movement * 0.5}px, ${normalizedBeta * 3}px)`;
                eagleLayer1.style.opacity = opacity1;
            }

            // Druga warstwa orła - większe przesunięcie
            if (eagleLayer2) {
                const opacity2 = Math.abs(normalizedGamma) < 0.3 ? baseOpacity : baseOpacity * (0.8 - Math.abs(normalizedGamma));
                eagleLayer2.style.transform = `translate(${movement * 0.8}px, ${normalizedBeta * 4}px)`;
                eagleLayer2.style.opacity = opacity2;
            }

            // Trzecia warstwa orła - największe przesunięcie
            if (eagleLayer3) {
                const opacity3 = Math.abs(normalizedGamma) < 0.1 ? baseOpacity : baseOpacity * (0.6 - Math.abs(normalizedGamma) * 1.5);
                eagleLayer3.style.transform = `translate(${movement}px, ${normalizedBeta * 5}px)`;
                eagleLayer3.style.opacity = Math.max(0, opacity3);
            }

            // Overlay hologramu - na górze, lekko przezroczysty
            if (overlayLayer) {
                overlayLayer.style.transform = `translate(${movement * 0.3}px, ${normalizedBeta * 2}px)`;
                overlayLayer.style.opacity = 0.4 + Math.abs(normalizedGamma) * 0.3;
            }
        }

        // Uruchom żyroskop po kliknięciu (wymagane na iOS)
        document.addEventListener('click', function() {
            if (!isGyroscopeEnabled) {
                requestGyroscopePermission();
            }
        }, { once: true });

        // Automatyczne uruchomienie na Androidzie
        if (navigator.userAgent.toLowerCase().indexOf('android') > -1) {
            setTimeout(() => {
                isGyroscopeEnabled = true;
                startGyroscope();
            }, 1000);
        }
    </script>
    
</body>
